## é¢˜ç›®åœ°å€(139. å•è¯æ‹†åˆ†)

https://leetcode-cn.com/problems/word-break/

## é¢˜ç›®æè¿°

```
ç»™å®šä¸€ä¸ªéžç©ºå­—ç¬¦ä¸² s å’Œä¸€ä¸ªåŒ…å«éžç©ºå•è¯çš„åˆ—è¡¨ wordDictï¼Œåˆ¤å®šÂ s æ˜¯å¦å¯ä»¥è¢«ç©ºæ ¼æ‹†åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåœ¨å­—å…¸ä¸­å‡ºçŽ°çš„å•è¯ã€‚

è¯´æ˜Žï¼š

æ‹†åˆ†æ—¶å¯ä»¥é‡å¤ä½¿ç”¨å­—å…¸ä¸­çš„å•è¯ã€‚
ä½ å¯ä»¥å‡è®¾å­—å…¸ä¸­æ²¡æœ‰é‡å¤çš„å•è¯ã€‚
ç¤ºä¾‹ 1ï¼š

è¾“å…¥: s = "leetcode", wordDict = ["leet", "code"]
è¾“å‡º: true
è§£é‡Š: è¿”å›ž true å› ä¸º "leetcode" å¯ä»¥è¢«æ‹†åˆ†æˆ "leet code"ã€‚
ç¤ºä¾‹ 2ï¼š

è¾“å…¥: s = "applepenapple", wordDict = ["apple", "pen"]
è¾“å‡º: true
è§£é‡Š: è¿”å›ž true å› ä¸º "applepenapple" å¯ä»¥è¢«æ‹†åˆ†æˆ "apple pen apple"ã€‚
Â     æ³¨æ„ä½ å¯ä»¥é‡å¤ä½¿ç”¨å­—å…¸ä¸­çš„å•è¯ã€‚
ç¤ºä¾‹ 3ï¼š

è¾“å…¥: s = "catsandog", wordDict = ["cats", "dog", "sand", "and", "cat"]
è¾“å‡º: false

```

## å‰ç½®çŸ¥è¯†

- [åŠ¨æ€è§„åˆ’](https://github.com/azl397985856/leetcode/blob/master/thinkings/dynamic-programming.md)

## å…¬å¸

- é˜¿é‡Œ
- è…¾è®¯
- ç™¾åº¦
- å­—èŠ‚

## æ€è·¯

è¿™é“é¢˜æ˜¯ç»™å®šä¸€ä¸ªå­—å…¸å’Œä¸€ä¸ªå¥å­ï¼Œåˆ¤æ–­è¯¥å¥å­æ˜¯å¦å¯ä»¥ç”±å­—å…¸é‡Œé¢çš„å•è¯ç»„å‡ºæ¥ï¼Œä¸€ä¸ªå•è¯å¯ä»¥ç”¨å¤šæ¬¡ã€‚

æš´åŠ›çš„æ–¹æ³•æ˜¯æ— è§£çš„ï¼Œå¤æ‚åº¦æ¯”è¾ƒé«˜ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ã€‚

æš´åŠ›æ€è·¯æ˜¯ä»ŽåŒ¹é…ä½ç½® 0 å¼€å§‹åŒ¹é…ï¼Œ åœ¨ wordDict ä¸­ä¸€ä¸ªä¸ªæ‰¾ï¼Œå¦‚æžœå…¶èƒ½å’Œ s åŒ¹é…ä¸Šå°±å°è¯•è¿›è¡ŒåŒ¹é…ï¼Œå¹¶æ›´æ–°åŒ¹é…ä½ç½®ã€‚

æ¯”å¦‚ s = "leetcode", wordDict = ["leet", "code"]ã€‚

é‚£ä¹ˆï¼š

- å…ˆè¯•è¯• leet å¯ä»¥åŒ¹é…ä¹ˆï¼Ÿå¯ä»¥çš„ï¼ŒåŒ¹é…åŽ s å‰©ä¸‹ codeï¼Œç»§ç»­åœ¨ wordDict ä¸­æ‰¾ã€‚
- leet å¯ä»¥åŒ¹é…ä¹ˆï¼Ÿä¸èƒ½ï¼code èƒ½å¤ŸåŒ¹é…ä¹ˆï¼Ÿå¯ä»¥ï¼è¿”å›ž true ç»“æŸ

å¦‚æžœ wordDict éåŽ†ä¸€æ¬¡æ²¡æœ‰ä»»ä½•è¿›å±•ï¼Œé‚£ä¹ˆç›´æŽ¥è¿”å›ž falseã€‚

æ³¨æ„åˆ°å¦‚æžœåŒ¹é…æˆåŠŸä¸€æ¬¡åŽï¼Œæœ¬è´¨æ˜¯æŠŠé—®é¢˜è§„æ¨¡ç¼©å°äº†ï¼Œé—®é¢˜æ€§è´¨ä¸å˜ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨åŠ¨æ€è§„åˆ’æ¥è§£å†³ã€‚

```py
@cache
def dp(pos):
    if pos == len(s): return True
    for word in wordDict:
        if s[pos:pos+len(word)] == word and dp(pos + len(word)): return True
    return False
return dp(0)
```

å¤æ‚åº¦ä¸º $O(n^2 * m)$ å…¶ä¸­ n ä¸º s é•¿åº¦ï¼Œ m ä¸º wordDict é•¿åº¦ã€‚

æˆ‘ä»¬ç”¨å›¾æ¥æ„Ÿå—ä¸€ä¸‹ï¼š

![139.word-break-1](https://p.ipic.vip/5b21ws.jpg)

æŽ¥ä¸‹æ¥æˆ‘ä»¬ä»¥é¢˜ç›®ç»™çš„ä¾‹å­åˆ†æ­¥éª¤è§£è¯»ä¸€ä¸‹ï¼š

ï¼ˆä»¥ä¸‹çš„å›¾å·¦è¾¹éƒ½ä»£è¡¨ sï¼Œå³è¾¹éƒ½æ˜¯ dictï¼Œç°è‰²ä»£è¡¨æ²¡æœ‰å¤„ç†çš„å­—ç¬¦ï¼Œç»¿è‰²ä»£è¡¨åŒ¹é…æˆåŠŸï¼Œçº¢è‰²ä»£è¡¨åŒ¹é…å¤±è´¥ï¼‰

![139.word-break-2](https://p.ipic.vip/j3tv58.jpg)

![139.word-break-3](https://p.ipic.vip/b19e31.jpg)

![139.word-break-4](https://p.ipic.vip/dqxyvj.jpg)

![139.word-break-5](https://p.ipic.vip/w4t8bo.jpg)

ä¸Šé¢åˆ†æ­¥è§£é‡Šäº†ç®—æ³•çš„åŸºæœ¬è¿‡ç¨‹ï¼Œä¸‹é¢æˆ‘ä»¬æ„Ÿæ€§è®¤è¯†ä¸‹è¿™é“é¢˜ï¼Œæˆ‘æŠŠå®ƒæ¯”å–»ä¸º
ä½ æ­£åœ¨`å¾€ä¸€ä¸ªè€å¼æ‰‹ç”µç­’ðŸ”¦ä¸­è£…ç”µæ± `

![139.word-break-6](https://p.ipic.vip/yu4j2f.jpg)

æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œ ä½¿å¾—å¤æ‚åº¦å’Œ m æ— å…³ã€‚ä¼˜åŒ–çš„å…³é”®æ˜¯åœ¨ dp å‡½æ•°å†…éƒ¨æžšä¸¾åŒ¹é…çš„é•¿åº¦ kã€‚è¿™æ ·æˆ‘ä»¬æˆªå– s[pos:pos+k] å…¶ä¸­ pos è¡¨ç¤ºå½“å‰åŒ¹é…åˆ°çš„ä½ç½®ã€‚ç„¶åŽåªè¦çœ‹ s[pos:pos+k]  åœ¨ wordDict å­˜åœ¨ä¸Žå¦å°±è¡Œã€‚å­˜åœ¨äº†å°±æ›´æ–°åŒ¹é…ä½ç½®ç»§ç»­ï¼Œä¸å­˜åœ¨å°±ç»§ç»­ã€‚è€Œ*çœ‹ s[pos:pos+k]  åœ¨ wordDict å­˜åœ¨ä¸Žå¦å°±è¡Œ* æ˜¯å¯ä»¥é€šè¿‡å°† wordDict ä¸­æ”¾å…¥å“ˆå¸Œé›†åˆä¸­è¿›è¡Œä¼˜åŒ–çš„ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)ï¼Œç‰ºç‰²ä¸€ç‚¹ç©ºé—´ï¼Œç©ºé—´å¤æ‚åº¦ O(m)

## ä»£ç 

ä»£ç æ”¯æŒï¼š Python3, JSï¼ŒCPP

Python3 Code:

```py
class Solution:
    def wordBreak(self, s: str, wordDict: List[str]) -> bool:
        wordDict = set(wordDict)
        @cache
        def dp(pos):
            if pos == len(s): return True
            cur = ''
            for nxt in range(pos, len(s)):
                cur += s[nxt]
                if cur in wordDict and dp(nxt + 1): return True
            return False
        return dp(0)
```

JS Code:

```js
/**
 * @param {string} s
 * @param {string[]} wordDict
 * @return {boolean}
 */
var wordBreak = function (s, wordDict) {
  const dp = Array(s.length + 1);
  dp[0] = true;
  for (let i = 0; i < s.length + 1; i++) {
    for (let word of wordDict) {
      if (word.length <= i && dp[i - word.length]) {
        if (s.substring(i - word.length, i) === word) {
          dp[i] = true;
        }
      }
    }
  }

  return dp[s.length] || false;
};
```

CPP Code:

```cpp
class Solution {
public:
    bool wordBreak(string s, vector<string>& dict) {
        unordered_set<string> st(begin(dict), end(dict));
        int N = s.size();
        vector<bool> dp(N + 1);
        dp[0] = true;
        for (int i = 1; i <= N; ++i) {
            for (int j = 0; j < i && !dp[i]; ++j) {
                dp[i] = dp[j] && st.count(s.substr(j, i - j));
            }
        }
        return dp[N];
    }
};

```

**å¤æ‚åº¦åˆ†æž**

ä»¤ n å’Œ m åˆ†åˆ«ä¸ºå­—ç¬¦ä¸²å’Œå­—å…¸çš„é•¿åº¦ã€‚

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n ^ 2)$
- ç©ºé—´å¤æ‚åº¦ï¼š$O(m)$

å¤§å®¶å¯¹æ­¤æœ‰ä½•çœ‹æ³•ï¼Œæ¬¢è¿Žç»™æˆ‘ç•™è¨€ï¼Œæˆ‘æœ‰æ—¶é—´éƒ½ä¼šä¸€ä¸€æŸ¥çœ‹å›žç­”ã€‚æ›´å¤šç®—æ³•å¥—è·¯å¯ä»¥è®¿é—®æˆ‘çš„ LeetCode é¢˜è§£ä»“åº“ï¼šhttps://github.com/azl397985856/leetcode ã€‚ ç›®å‰å·²ç» 37K star å•¦ã€‚
å¤§å®¶ä¹Ÿå¯ä»¥å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€ŠåŠ›æ‰£åŠ åŠ ã€‹å¸¦ä½ å•ƒä¸‹ç®—æ³•è¿™å—ç¡¬éª¨å¤´ã€‚
![](https://p.ipic.vip/zxdbe9.jpg)
